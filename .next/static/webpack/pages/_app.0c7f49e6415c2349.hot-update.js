"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "(pages-dir-browser)/./src/lib/useMe.ts":
/*!**************************!*\
  !*** ./src/lib/useMe.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useMe: () => (/* binding */ useMe)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n// src/lib/useMe.ts\n\nfunction useMe() {\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        me: null,\n        org: null,\n        loading: true,\n        error: null\n    });\n    const mountedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n    const fetchMe = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMe.useCallback[fetchMe]\": async ()=>{\n            try {\n                const r = await fetch(\"/api/me\");\n                const j = await r.json();\n                // Only update state if component is still mounted\n                if (!mountedRef.current) return;\n                if (!r.ok || (j === null || j === void 0 ? void 0 : j.ok) === false) {\n                    const msg = (j === null || j === void 0 ? void 0 : j.error) || \"HTTP \".concat(r.status);\n                    setState({\n                        me: null,\n                        org: null,\n                        loading: false,\n                        error: msg\n                    });\n                    return;\n                }\n                const org = j.org || null;\n                const u = j.user;\n                var _u_name;\n                const me = {\n                    email: u.email,\n                    name: (_u_name = u.name) !== null && _u_name !== void 0 ? _u_name : null,\n                    role: u.baseRole,\n                    rbacRoles: Array.isArray(u.rbacRoles) ? u.rbacRoles : [],\n                    isOwner: !!u.isOwner,\n                    isProvider: !!u.isProvider,\n                    perms: Array.isArray(u.perms) ? u.perms : []\n                };\n                setState({\n                    me,\n                    org,\n                    loading: false,\n                    error: null\n                });\n            } catch (e) {\n                // Only update state if component is still mounted\n                if (!mountedRef.current) return;\n                const msg = (e === null || e === void 0 ? void 0 : e.message) || \"Failed to load /api/me\";\n                setState({\n                    me: null,\n                    org: null,\n                    loading: false,\n                    error: msg\n                });\n            }\n        }\n    }[\"useMe.useCallback[fetchMe]\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useMe.useEffect\": ()=>{\n            mountedRef.current = true;\n            fetchMe();\n            return ({\n                \"useMe.useEffect\": ()=>{\n                    mountedRef.current = false;\n                }\n            })[\"useMe.useEffect\"];\n        }\n    }[\"useMe.useEffect\"], [\n        fetchMe\n    ]);\n    const refresh = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMe.useCallback[refresh]\": ()=>fetchMe()\n    }[\"useMe.useCallback[refresh]\"], [\n        fetchMe\n    ]);\n    // Back-compat return shape (adds org+error+refresh while keeping me+loading)\n    return {\n        me: state.me,\n        org: state.org,\n        loading: state.loading,\n        error: state.error,\n        refresh\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL3NyYy9saWIvdXNlTWUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsbUJBQW1CO0FBQzhDO0FBc0IxRCxTQUFTSTtJQUNkLE1BQU0sQ0FBQ0MsT0FBT0MsU0FBUyxHQUFHSCwrQ0FBUUEsQ0FBVTtRQUFFSSxJQUFJO1FBQU1DLEtBQUs7UUFBTUMsU0FBUztRQUFNQyxPQUFPO0lBQUs7SUFDOUYsTUFBTUMsYUFBYVQsNkNBQU1BLENBQUM7SUFFMUIsTUFBTVUsVUFBVVosa0RBQVdBO3NDQUFDO1lBQzFCLElBQUk7Z0JBQ0YsTUFBTWEsSUFBSSxNQUFNQyxNQUFNO2dCQUN0QixNQUFNQyxJQUFnQixNQUFNRixFQUFFRyxJQUFJO2dCQUVsQyxrREFBa0Q7Z0JBQ2xELElBQUksQ0FBQ0wsV0FBV00sT0FBTyxFQUFFO2dCQUV6QixJQUFJLENBQUNKLEVBQUVLLEVBQUUsSUFBSSxDQUFDSCxjQUFBQSx3QkFBRCxFQUFZRyxFQUFFLE1BQUssT0FBTztvQkFDckMsTUFBTUMsTUFBTSxDQUFDSixjQUFBQSx3QkFBRCxFQUFZTCxLQUFLLEtBQUksUUFBaUIsT0FBVEcsRUFBRU8sTUFBTTtvQkFDakRkLFNBQVM7d0JBQUVDLElBQUk7d0JBQU1DLEtBQUs7d0JBQU1DLFNBQVM7d0JBQU9DLE9BQU9TO29CQUFJO29CQUMzRDtnQkFDRjtnQkFFQSxNQUFNWCxNQUF1QixFQUFXQSxHQUFHLElBQUk7Z0JBQy9DLE1BQU1hLElBQUksRUFBV0MsSUFBSTtvQkFJakJEO2dCQUZSLE1BQU1kLEtBQWtCO29CQUN0QmdCLE9BQU9GLEVBQUVFLEtBQUs7b0JBQ2RDLE1BQU1ILENBQUFBLFVBQUFBLEVBQUVHLElBQUksY0FBTkgscUJBQUFBLFVBQVU7b0JBQ2hCSSxNQUFNSixFQUFFSyxRQUFRO29CQUNoQkMsV0FBV0MsTUFBTUMsT0FBTyxDQUFDUixFQUFFTSxTQUFTLElBQUlOLEVBQUVNLFNBQVMsR0FBRyxFQUFFO29CQUN4REcsU0FBUyxDQUFDLENBQUNULEVBQUVTLE9BQU87b0JBQ3BCQyxZQUFZLENBQUMsQ0FBQ1YsRUFBRVUsVUFBVTtvQkFDMUJDLE9BQU9KLE1BQU1DLE9BQU8sQ0FBQ1IsRUFBRVcsS0FBSyxJQUFJWCxFQUFFVyxLQUFLLEdBQUcsRUFBRTtnQkFDOUM7Z0JBRUExQixTQUFTO29CQUFFQztvQkFBSUM7b0JBQUtDLFNBQVM7b0JBQU9DLE9BQU87Z0JBQUs7WUFDbEQsRUFBRSxPQUFPdUIsR0FBWTtnQkFDbkIsa0RBQWtEO2dCQUNsRCxJQUFJLENBQUN0QixXQUFXTSxPQUFPLEVBQUU7Z0JBQ3pCLE1BQU1FLE1BQU0sQ0FBQ2MsY0FBQUEsd0JBQUQsRUFBb0NDLE9BQU8sS0FBSTtnQkFDM0Q1QixTQUFTO29CQUFFQyxJQUFJO29CQUFNQyxLQUFLO29CQUFNQyxTQUFTO29CQUFPQyxPQUFPUztnQkFBSTtZQUM3RDtRQUNGO3FDQUFHLEVBQUU7SUFFTGxCLGdEQUFTQTsyQkFBQztZQUNSVSxXQUFXTSxPQUFPLEdBQUc7WUFDckJMO1lBQ0E7bUNBQU87b0JBQ0xELFdBQVdNLE9BQU8sR0FBRztnQkFDdkI7O1FBQ0Y7MEJBQUc7UUFBQ0w7S0FBUTtJQUVaLE1BQU11QixVQUFVbkMsa0RBQVdBO3NDQUFDLElBQU1ZO3FDQUFXO1FBQUNBO0tBQVE7SUFFdEQsNkVBQTZFO0lBQzdFLE9BQU87UUFBRUwsSUFBSUYsTUFBTUUsRUFBRTtRQUFFQyxLQUFLSCxNQUFNRyxHQUFHO1FBQUVDLFNBQVNKLE1BQU1JLE9BQU87UUFBRUMsT0FBT0wsTUFBTUssS0FBSztRQUFFeUI7SUFBUTtBQUM3RiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9zcmMvbGliL3VzZU1lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvdXNlTWUudHNcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB0eXBlIHsgTWVSZXNwb25zZSwgT3JnU2hhcGUgfSBmcm9tIFwiQC9saWIvdHlwZXMvbWVcIjtcblxuLyoqXG4gKiBVSS1mYWNpbmcgdXNlciBtb2RlbCByZXR1cm5lZCBieSB0aGlzIGhvb2suXG4gKiBXZSBrZWVwIHRoZSBzaGFwZSBzdGFibGUgc28gcGFnZXMgY2FuIHJlbHkgb24gaXQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ3VycmVudFVzZXIge1xuICBlbWFpbDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmcgfCBudWxsO1xuICAvLyBCYWNrLWNvbXBhdCBhbGlhczsgd2Ugc3VyZmFjZSBcInJvbGVcIiBhcyB0aGUgc2VydmVyJ3MgXCJiYXNlUm9sZVwiXG4gIHJvbGU6IFwiT1dORVJcIiB8IFwiTUFOQUdFUlwiIHwgXCJTVEFGRlwiIHwgXCJQUk9WSURFUlwiIHwgXCJBQ0NPVU5UQU5UXCIgfCBcIlZJRVdFUlwiO1xuICByYmFjUm9sZXM6IHN0cmluZ1tdO1xuICBpc093bmVyOiBib29sZWFuO1xuICBpc1Byb3ZpZGVyOiBib29sZWFuO1xuICBwZXJtczogc3RyaW5nW107IC8vIDwtIElNUE9SVEFOVDogZWZmZWN0aXZlIHBlcm1pc3Npb24gY29kZXMgKGUuZy4gXCJiaWxsaW5nOm1hbmFnZVwiKVxufVxuXG50eXBlIE1lU3RhdGUgPVxuICB8IHsgbWU6IEN1cnJlbnRVc2VyIHwgbnVsbDsgb3JnOiBPcmdTaGFwZSB8IG51bGw7IGxvYWRpbmc6IHRydWU7IGVycm9yOiBudWxsIH1cbiAgfCB7IG1lOiBDdXJyZW50VXNlciB8IG51bGw7IG9yZzogT3JnU2hhcGUgfCBudWxsOyBsb2FkaW5nOiBmYWxzZTsgZXJyb3I6IHN0cmluZyB8IG51bGwgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZU1lKCkge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPE1lU3RhdGU+KHsgbWU6IG51bGwsIG9yZzogbnVsbCwgbG9hZGluZzogdHJ1ZSwgZXJyb3I6IG51bGwgfSk7XG4gIGNvbnN0IG1vdW50ZWRSZWYgPSB1c2VSZWYodHJ1ZSk7XG5cbiAgY29uc3QgZmV0Y2hNZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKFwiL2FwaS9tZVwiKTtcbiAgICAgIGNvbnN0IGo6IE1lUmVzcG9uc2UgPSBhd2FpdCByLmpzb24oKTtcblxuICAgICAgLy8gT25seSB1cGRhdGUgc3RhdGUgaWYgY29tcG9uZW50IGlzIHN0aWxsIG1vdW50ZWRcbiAgICAgIGlmICghbW91bnRlZFJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgIGlmICghci5vayB8fCAoaiBhcyBhbnkpPy5vayA9PT0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgbXNnID0gKGogYXMgYW55KT8uZXJyb3IgfHwgYEhUVFAgJHtyLnN0YXR1c31gO1xuICAgICAgICBzZXRTdGF0ZSh7IG1lOiBudWxsLCBvcmc6IG51bGwsIGxvYWRpbmc6IGZhbHNlLCBlcnJvcjogbXNnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9yZzogT3JnU2hhcGUgfCBudWxsID0gKGogYXMgYW55KS5vcmcgfHwgbnVsbDtcbiAgICAgIGNvbnN0IHUgPSAoaiBhcyBhbnkpLnVzZXI7XG5cbiAgICAgIGNvbnN0IG1lOiBDdXJyZW50VXNlciA9IHtcbiAgICAgICAgZW1haWw6IHUuZW1haWwsXG4gICAgICAgIG5hbWU6IHUubmFtZSA/PyBudWxsLFxuICAgICAgICByb2xlOiB1LmJhc2VSb2xlLCAgICAgICAgICAgIC8vIGFsaWFzIGJhc2VSb2xlIOKGkiByb2xlXG4gICAgICAgIHJiYWNSb2xlczogQXJyYXkuaXNBcnJheSh1LnJiYWNSb2xlcykgPyB1LnJiYWNSb2xlcyA6IFtdLFxuICAgICAgICBpc093bmVyOiAhIXUuaXNPd25lcixcbiAgICAgICAgaXNQcm92aWRlcjogISF1LmlzUHJvdmlkZXIsXG4gICAgICAgIHBlcm1zOiBBcnJheS5pc0FycmF5KHUucGVybXMpID8gdS5wZXJtcyA6IFtdLCAvLyA8LSB0aGUgbmV3IGZpZWxkXG4gICAgICB9O1xuXG4gICAgICBzZXRTdGF0ZSh7IG1lLCBvcmcsIGxvYWRpbmc6IGZhbHNlLCBlcnJvcjogbnVsbCB9KTtcbiAgICB9IGNhdGNoIChlOiB1bmtub3duKSB7XG4gICAgICAvLyBPbmx5IHVwZGF0ZSBzdGF0ZSBpZiBjb21wb25lbnQgaXMgc3RpbGwgbW91bnRlZFxuICAgICAgaWYgKCFtb3VudGVkUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgIGNvbnN0IG1zZyA9IChlIGFzIHsgbWVzc2FnZT86IHN0cmluZyB9IHwgbnVsbCk/Lm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gbG9hZCAvYXBpL21lXCI7XG4gICAgICBzZXRTdGF0ZSh7IG1lOiBudWxsLCBvcmc6IG51bGwsIGxvYWRpbmc6IGZhbHNlLCBlcnJvcjogbXNnIH0pO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbW91bnRlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICBmZXRjaE1lKCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG1vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIH07XG4gIH0sIFtmZXRjaE1lXSk7XG5cbiAgY29uc3QgcmVmcmVzaCA9IHVzZUNhbGxiYWNrKCgpID0+IGZldGNoTWUoKSwgW2ZldGNoTWVdKTtcblxuICAvLyBCYWNrLWNvbXBhdCByZXR1cm4gc2hhcGUgKGFkZHMgb3JnK2Vycm9yK3JlZnJlc2ggd2hpbGUga2VlcGluZyBtZStsb2FkaW5nKVxuICByZXR1cm4geyBtZTogc3RhdGUubWUsIG9yZzogc3RhdGUub3JnLCBsb2FkaW5nOiBzdGF0ZS5sb2FkaW5nLCBlcnJvcjogc3RhdGUuZXJyb3IsIHJlZnJlc2ggfTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlTWUiLCJzdGF0ZSIsInNldFN0YXRlIiwibWUiLCJvcmciLCJsb2FkaW5nIiwiZXJyb3IiLCJtb3VudGVkUmVmIiwiZmV0Y2hNZSIsInIiLCJmZXRjaCIsImoiLCJqc29uIiwiY3VycmVudCIsIm9rIiwibXNnIiwic3RhdHVzIiwidSIsInVzZXIiLCJlbWFpbCIsIm5hbWUiLCJyb2xlIiwiYmFzZVJvbGUiLCJyYmFjUm9sZXMiLCJBcnJheSIsImlzQXJyYXkiLCJpc093bmVyIiwiaXNQcm92aWRlciIsInBlcm1zIiwiZSIsIm1lc3NhZ2UiLCJyZWZyZXNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./src/lib/useMe.ts\n"));

/***/ })

});