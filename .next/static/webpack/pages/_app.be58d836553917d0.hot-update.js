"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "(pages-dir-browser)/./src/lib/useMe.ts":
/*!**************************!*\
  !*** ./src/lib/useMe.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useMe: () => (/* binding */ useMe)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n// src/lib/useMe.ts\n\nfunction useMe() {\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        me: null,\n        org: null,\n        loading: true,\n        error: null\n    });\n    const abortRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const fetchMe = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMe.useCallback[fetchMe]\": async ()=>{\n            var _abortRef_current;\n            (_abortRef_current = abortRef.current) === null || _abortRef_current === void 0 ? void 0 : _abortRef_current.abort();\n            const ac = new AbortController();\n            abortRef.current = ac;\n            try {\n                const r = await fetch(\"/api/me\", {\n                    signal: ac.signal\n                });\n                const j = await r.json();\n                if (!r.ok || (j === null || j === void 0 ? void 0 : j.ok) === false) {\n                    const msg = (j === null || j === void 0 ? void 0 : j.error) || \"HTTP \".concat(r.status);\n                    setState({\n                        me: null,\n                        org: null,\n                        loading: false,\n                        error: msg\n                    });\n                    return;\n                }\n                const org = j.org || null;\n                const u = j.user;\n                var _u_name;\n                const me = {\n                    email: u.email,\n                    name: (_u_name = u.name) !== null && _u_name !== void 0 ? _u_name : null,\n                    role: u.baseRole,\n                    rbacRoles: Array.isArray(u.rbacRoles) ? u.rbacRoles : [],\n                    isOwner: !!u.isOwner,\n                    isProvider: !!u.isProvider,\n                    perms: Array.isArray(u.perms) ? u.perms : []\n                };\n                setState({\n                    me,\n                    org,\n                    loading: false,\n                    error: null\n                });\n            } catch (e) {\n                if ((e === null || e === void 0 ? void 0 : e.name) === \"AbortError\") return;\n                const msg = (e === null || e === void 0 ? void 0 : e.message) || \"Failed to load /api/me\";\n                setState({\n                    me: null,\n                    org: null,\n                    loading: false,\n                    error: msg\n                });\n            }\n        }\n    }[\"useMe.useCallback[fetchMe]\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useMe.useEffect\": ()=>{\n            fetchMe();\n            return ({\n                \"useMe.useEffect\": ()=>{\n                    try {\n                        var _abortRef_current;\n                        (_abortRef_current = abortRef.current) === null || _abortRef_current === void 0 ? void 0 : _abortRef_current.abort();\n                    } catch (e) {\n                    // Ignore AbortError during cleanup - this is expected in React Strict Mode\n                    }\n                }\n            })[\"useMe.useEffect\"];\n        }\n    }[\"useMe.useEffect\"], [\n        fetchMe\n    ]);\n    const refresh = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMe.useCallback[refresh]\": ()=>fetchMe()\n    }[\"useMe.useCallback[refresh]\"], [\n        fetchMe\n    ]);\n    // Back-compat return shape (adds org+error+refresh while keeping me+loading)\n    return {\n        me: state.me,\n        org: state.org,\n        loading: state.loading,\n        error: state.error,\n        refresh\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2Uvc3JjL2xpYi91c2VNZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL3VzZU1lLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdHlwZSB7IE1lUmVzcG9uc2UsIE9yZ1NoYXBlIH0gZnJvbSBcIkAvbGliL3R5cGVzL21lXCI7XG5cbi8qKlxuICogVUktZmFjaW5nIHVzZXIgbW9kZWwgcmV0dXJuZWQgYnkgdGhpcyBob29rLlxuICogV2Uga2VlcCB0aGUgc2hhcGUgc3RhYmxlIHNvIHBhZ2VzIGNhbiByZWx5IG9uIGl0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEN1cnJlbnRVc2VyIHtcbiAgZW1haWw6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgLy8gQmFjay1jb21wYXQgYWxpYXM7IHdlIHN1cmZhY2UgXCJyb2xlXCIgYXMgdGhlIHNlcnZlcidzIFwiYmFzZVJvbGVcIlxuICByb2xlOiBcIk9XTkVSXCIgfCBcIk1BTkFHRVJcIiB8IFwiU1RBRkZcIiB8IFwiUFJPVklERVJcIiB8IFwiQUNDT1VOVEFOVFwiIHwgXCJWSUVXRVJcIjtcbiAgcmJhY1JvbGVzOiBzdHJpbmdbXTtcbiAgaXNPd25lcjogYm9vbGVhbjtcbiAgaXNQcm92aWRlcjogYm9vbGVhbjtcbiAgcGVybXM6IHN0cmluZ1tdOyAvLyA8LSBJTVBPUlRBTlQ6IGVmZmVjdGl2ZSBwZXJtaXNzaW9uIGNvZGVzIChlLmcuIFwiYmlsbGluZzptYW5hZ2VcIilcbn1cblxudHlwZSBNZVN0YXRlID1cbiAgfCB7IG1lOiBDdXJyZW50VXNlciB8IG51bGw7IG9yZzogT3JnU2hhcGUgfCBudWxsOyBsb2FkaW5nOiB0cnVlOyBlcnJvcjogbnVsbCB9XG4gIHwgeyBtZTogQ3VycmVudFVzZXIgfCBudWxsOyBvcmc6IE9yZ1NoYXBlIHwgbnVsbDsgbG9hZGluZzogZmFsc2U7IGVycm9yOiBzdHJpbmcgfCBudWxsIH07XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VNZSgpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTxNZVN0YXRlPih7IG1lOiBudWxsLCBvcmc6IG51bGwsIGxvYWRpbmc6IHRydWUsIGVycm9yOiBudWxsIH0pO1xuICBjb25zdCBhYm9ydFJlZiA9IHVzZVJlZjxBYm9ydENvbnRyb2xsZXIgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBmZXRjaE1lID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGFib3J0UmVmLmN1cnJlbnQ/LmFib3J0KCk7XG4gICAgY29uc3QgYWMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgYWJvcnRSZWYuY3VycmVudCA9IGFjO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaChcIi9hcGkvbWVcIiwgeyBzaWduYWw6IGFjLnNpZ25hbCB9KTtcbiAgICAgIGNvbnN0IGo6IE1lUmVzcG9uc2UgPSBhd2FpdCByLmpzb24oKTtcblxuICAgICAgaWYgKCFyLm9rIHx8IChqIGFzIGFueSk/Lm9rID09PSBmYWxzZSkge1xuICAgICAgICBjb25zdCBtc2cgPSAoaiBhcyBhbnkpPy5lcnJvciB8fCBgSFRUUCAke3Iuc3RhdHVzfWA7XG4gICAgICAgIHNldFN0YXRlKHsgbWU6IG51bGwsIG9yZzogbnVsbCwgbG9hZGluZzogZmFsc2UsIGVycm9yOiBtc2cgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb3JnOiBPcmdTaGFwZSB8IG51bGwgPSAoaiBhcyBhbnkpLm9yZyB8fCBudWxsO1xuICAgICAgY29uc3QgdSA9IChqIGFzIGFueSkudXNlcjtcblxuICAgICAgY29uc3QgbWU6IEN1cnJlbnRVc2VyID0ge1xuICAgICAgICBlbWFpbDogdS5lbWFpbCxcbiAgICAgICAgbmFtZTogdS5uYW1lID8/IG51bGwsXG4gICAgICAgIHJvbGU6IHUuYmFzZVJvbGUsICAgICAgICAgICAgLy8gYWxpYXMgYmFzZVJvbGUg4oaSIHJvbGVcbiAgICAgICAgcmJhY1JvbGVzOiBBcnJheS5pc0FycmF5KHUucmJhY1JvbGVzKSA/IHUucmJhY1JvbGVzIDogW10sXG4gICAgICAgIGlzT3duZXI6ICEhdS5pc093bmVyLFxuICAgICAgICBpc1Byb3ZpZGVyOiAhIXUuaXNQcm92aWRlcixcbiAgICAgICAgcGVybXM6IEFycmF5LmlzQXJyYXkodS5wZXJtcykgPyB1LnBlcm1zIDogW10sIC8vIDwtIHRoZSBuZXcgZmllbGRcbiAgICAgIH07XG5cbiAgICAgIHNldFN0YXRlKHsgbWUsIG9yZywgbG9hZGluZzogZmFsc2UsIGVycm9yOiBudWxsIH0pO1xuICAgIH0gY2F0Y2ggKGU6IHVua25vd24pIHtcbiAgICAgIGlmICgoZSBhcyBhbnkpPy5uYW1lID09PSBcIkFib3J0RXJyb3JcIikgcmV0dXJuO1xuICAgICAgY29uc3QgbXNnID0gKGUgYXMgeyBtZXNzYWdlPzogc3RyaW5nIH0gfCBudWxsKT8ubWVzc2FnZSB8fCBcIkZhaWxlZCB0byBsb2FkIC9hcGkvbWVcIjtcbiAgICAgIHNldFN0YXRlKHsgbWU6IG51bGwsIG9yZzogbnVsbCwgbG9hZGluZzogZmFsc2UsIGVycm9yOiBtc2cgfSk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaE1lKCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGFib3J0UmVmLmN1cnJlbnQ/LmFib3J0KCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElnbm9yZSBBYm9ydEVycm9yIGR1cmluZyBjbGVhbnVwIC0gdGhpcyBpcyBleHBlY3RlZCBpbiBSZWFjdCBTdHJpY3QgTW9kZVxuICAgICAgfVxuICAgIH07XG4gIH0sIFtmZXRjaE1lXSk7XG5cbiAgY29uc3QgcmVmcmVzaCA9IHVzZUNhbGxiYWNrKCgpID0+IGZldGNoTWUoKSwgW2ZldGNoTWVdKTtcblxuICAvLyBCYWNrLWNvbXBhdCByZXR1cm4gc2hhcGUgKGFkZHMgb3JnK2Vycm9yK3JlZnJlc2ggd2hpbGUga2VlcGluZyBtZStsb2FkaW5nKVxuICByZXR1cm4geyBtZTogc3RhdGUubWUsIG9yZzogc3RhdGUub3JnLCBsb2FkaW5nOiBzdGF0ZS5sb2FkaW5nLCBlcnJvcjogc3RhdGUuZXJyb3IsIHJlZnJlc2ggfTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlTWUiLCJzdGF0ZSIsInNldFN0YXRlIiwibWUiLCJvcmciLCJsb2FkaW5nIiwiZXJyb3IiLCJhYm9ydFJlZiIsImZldGNoTWUiLCJjdXJyZW50IiwiYWJvcnQiLCJhYyIsIkFib3J0Q29udHJvbGxlciIsInIiLCJmZXRjaCIsInNpZ25hbCIsImoiLCJqc29uIiwib2siLCJtc2ciLCJzdGF0dXMiLCJ1IiwidXNlciIsImVtYWlsIiwibmFtZSIsInJvbGUiLCJiYXNlUm9sZSIsInJiYWNSb2xlcyIsIkFycmF5IiwiaXNBcnJheSIsImlzT3duZXIiLCJpc1Byb3ZpZGVyIiwicGVybXMiLCJlIiwibWVzc2FnZSIsInJlZnJlc2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./src/lib/useMe.ts\n"));

/***/ })

});