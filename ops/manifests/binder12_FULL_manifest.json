{
  "api_endpoints": [],
  "db_migrations": [
    {
      "id": "db_if_801733",
      "description": "Database: CREATE TABLE IF",
      "source_line_start": 35,
      "source_line_end": 40,
      "table_name": "IF",
      "implemented": false,
      "operation_type": "create_table",
      "sql_content": "CREATE TABLE IF NOT EXISTS companies (\r\n  id UUID PRIMARY KEY,\r\n  code TEXT NOT NULL UNIQUE,\r\n  name TEXT NOT NULL,\r\n  active BOOLEAN NOT NULL DEFAULT true,\r\n  created_at TIMESTAMPTZ NOT NULL DEFAULT now()\r\n);\r",
      "fields": [
        {
          "name": "id",
          "type": "uuid",
          "line": 36
        },
        {
          "name": "code",
          "type": "text",
          "line": 37
        },
        {
          "name": "name",
          "type": "text",
          "line": 38
        },
        {
          "name": "active",
          "type": "boolean",
          "line": 39
        },
        {
          "name": "created_at",
          "type": "timestamptz",
          "line": 40
        }
      ]
    },
    {
      "id": "db_if_801733",
      "description": "Database: CREATE TABLE IF",
      "source_line_start": 42,
      "source_line_end": 47,
      "table_name": "IF",
      "implemented": false,
      "operation_type": "create_table",
      "sql_content": "CREATE TABLE IF NOT EXISTS tenant_companies (\r\n  id UUID PRIMARY KEY,\r\n  tenant_id UUID NOT NULL,\r\n  company_id UUID NOT NULL REFERENCES companies(id),\r\n  UNIQUE(tenant_id, company_id)\r\n);\r",
      "fields": [
        {
          "name": "id",
          "type": "uuid",
          "line": 43
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "line": 44
        },
        {
          "name": "company_id",
          "type": "uuid",
          "line": 45
        }
      ]
    },
    {
      "id": "db_if_801733",
      "description": "Database: CREATE TABLE IF",
      "source_line_start": 48,
      "source_line_end": 53,
      "table_name": "IF",
      "implemented": false,
      "operation_type": "create_table",
      "sql_content": "CREATE TABLE IF NOT EXISTS company_locations (\r\n  id UUID PRIMARY KEY,\r\n  company_id UUID NOT NULL REFERENCES companies(id),\r\n  code TEXT NOT NULL,\r\n  name TEXT NOT NULL,\r\n  parent_location_id UUID NULL REFERENCES company_locations(id),\r\n  address JSONB NOT NULL DEFAULT '{}'::jsonb,\r\n  active BOOLEAN NOT NULL DEFAULT true,\r\n  UNIQUE(company_id, code)\r\n);\r",
      "fields": [
        {
          "name": "id",
          "type": "uuid",
          "line": 49
        },
        {
          "name": "company_id",
          "type": "uuid",
          "line": 50
        },
        {
          "name": "code",
          "type": "text",
          "line": 51
        },
        {
          "name": "name",
          "type": "text",
          "line": 52
        },
        {
          "name": "parent_location_id",
          "type": "uuid",
          "line": 53
        },
        {
          "name": "address",
          "type": "jsonb",
          "line": 54
        },
        {
          "name": "active",
          "type": "boolean",
          "line": 55
        }
      ]
    },
    {
      "id": "db_if_801733",
      "description": "Database: CREATE TABLE IF",
      "source_line_start": 59,
      "source_line_end": 72,
      "table_name": "IF",
      "implemented": false,
      "operation_type": "create_table",
      "sql_content": "CREATE TABLE IF NOT EXISTS role_scopes (\r\n  id UUID PRIMARY KEY,\r\n  tenant_id UUID NOT NULL,\r\n  user_id UUID NOT NULL,\r\n  role TEXT NOT NULL,\r\n  company_id UUID NULL,\r\n  location_id UUID NULL,\r\n  department_id UUID NULL,\r\n  scope JSONB NOT NULL DEFAULT '{}'::jsonb,\r\n  created_at TIMESTAMPTZ NOT NULL DEFAULT now()\r\n);\r",
      "fields": [
        {
          "name": "id",
          "type": "uuid",
          "line": 60
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "line": 61
        },
        {
          "name": "user_id",
          "type": "uuid",
          "line": 62
        },
        {
          "name": "role",
          "type": "text",
          "line": 63
        },
        {
          "name": "company_id",
          "type": "uuid",
          "line": 64
        },
        {
          "name": "location_id",
          "type": "uuid",
          "line": 65
        },
        {
          "name": "department_id",
          "type": "uuid",
          "line": 66
        },
        {
          "name": "scope",
          "type": "jsonb",
          "line": 67
        },
        {
          "name": "created_at",
          "type": "timestamptz",
          "line": 68
        }
      ]
    },
    {
      "id": "db_if_802279",
      "description": "Database: CREATE TABLE IF",
      "source_line_start": 396569,
      "source_line_end": 396582,
      "table_name": "IF",
      "implemented": false,
      "operation_type": "create_table",
      "sql_content": "CREATE TABLE IF NOT EXISTS assets (\r\n  id UUID PRIMARY KEY,\r\n  tenant_id UUID NOT NULL,\r\n  tag TEXT NOT NULL,\r\n  type TEXT NOT NULL,\r\n  status TEXT NOT NULL,\r\n  qr TEXT UNIQUE,\r\n  geo GEOGRAPHY(Point, 4326),\r\n  meta JSONB NOT NULL DEFAULT '{}'::jsonb,\r\n  created_at TIMESTAMPTZ NOT NULL DEFAULT now()\r\n);\r",
      "fields": [
        {
          "name": "id",
          "type": "uuid",
          "line": 570
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "line": 571
        },
        {
          "name": "tag",
          "type": "text",
          "line": 572
        },
        {
          "name": "type",
          "type": "text",
          "line": 573
        },
        {
          "name": "status",
          "type": "text",
          "line": 574
        },
        {
          "name": "qr",
          "type": "text",
          "line": 575
        },
        {
          "name": "meta",
          "type": "jsonb",
          "line": 577
        },
        {
          "name": "created_at",
          "type": "timestamptz",
          "line": 578
        }
      ]
    }
  ],
  "screens": [],
  "controls": [],
  "tests": [],
  "jobs": [],
  "ai_flows": [],
  "webhooks": [
    {
      "id": "webhook_handler_801733",
      "description": "Webhook: Webhook",
      "source_line_start": 91,
      "source_line_end": 94,
      "implemented": false
    },
    {
      "id": "webhook_handler_801733",
      "description": "Webhook: Webhook",
      "source_line_start": 101,
      "source_line_end": 105,
      "implemented": false
    }
  ],
  "integrations": []
}